Overview:  below are the functional specs an admin application for a new platform Braintrust is building called Nexus.  There are essentially 2 “views”, Admin and Client, that have some shared and some individual modules, all of which are described and designed below.


Implementation notes & Items you can ignore for the test project:
* These two applications should use a shared database
* figma designs
   * For any missing component state designs (loading, error, empty) just make something that looks standard/reasonable.  You'll see a logo missing here and there in the Figmas, do your best to produce production-quality design.
* Desktop web only, no need for mobile web support
* Don’t worry about integrating with WorkOS (SSO) or Google OAUTH2 - just implement a basic user AUTH system (no 2FA)
* Ignore data retention policy for logs, exceptions, and execution history.
* Ignore accessibility (WCAG)
* No need to connect to an SMS provider for test project.
* Your product will be judged on:
   * Functionality (how much of it did you get built and does it work) 
   * Code quality
   * Design quality / accuracy
* There could be ambiguities or details we missed in this spec so just make a logical guess and keep moving 


________________




Definitions: (used in below spec)
* Nexus Factory:  the core software platform that takes as input, survey questions from client employees + detailed documentation about workflows and produces a set of Automated Workflows and Custom Agents to automate as many of those workflows as possible
* Nexus Automated Workflows: a set of code, generated by the Nexus Factory, that is built to automate a distinct workflow in a client environment.  IE: processing customer invoices, handling customer service, handling recruiting, etc.  Workflows are comprised on Nexus Nodes.
* Nexus Nodes: pieces of custom code, generated by human devs then eventually the Nexus Factory, that are sub-components of Nexus Automated Workflows.  Example Nexus Nodes:
   * Monitor an email inbox (gmail or exchange)
   * Set or get rows from Salesforce API
   * Input time cards to Kronos API
   * Post a client invoice to Ariba API
   * Pull outstanding bills from Bill.com API
* Nexus Custom Agents:  technically just a type of custom node, these are clones of Braintrust AIR that can interact with the outside world via chat, txt, phone, email, slack or video call in order to help automate a workflow
* Nexus Admin User:  Braintrust employee (Adam/Nick)
* Nexus SE: Solutions Engineer: either a Braintrust employee or contractor that is dedicated to onboarding and maintaining Nexus customer accounts
* ADA Agent: a custom agent that is used internally in the process of translating unstructured survey and process descriptions into a customized Client Automation Proposal 
* HITL: Human In The Loop that is responsible for handling exceptions in automated workflows.  This will be an employee of the client company.
* Automated Workflow Exception:  when a workflow fails for any reason, an exception is thrown and the appropriate user(s) are notified.  This will typically be the SE + the selected client employees.  The action to be taken is for the HITL at the client to correctly execute the workflow manually and then document in the Nexus app what they did to correct it, so the SE can train the workflow to not hit that exception next time those conditions are met.




________________






Access Control Rules:
1. Roles:
   1. Admin (braintrust employee)
   2. Solutions  Engineer (SE): contractor/consultant 
   3. Client
2. Admin App
   1. only Nexus Admins and SEs log into this 
   2. Require usebraintrust.com OAUTH2 (login with google account)
   3. Admins can see all clients and manage users
   4. SEs can only see their assigned clients and cannot manage other admins or SEs but can manage client users
3. Client app 
   1. Only clients and assigned SEs log into this
   2. Access control options:
      1. Our internal account system w/ 2FA/passkey
      2. SSO integration w/ client system


________________




Admin App PRD:
1. Dashboard: Dashboard Overview
  
   1. Data card filters (above data cards)
   1. Last 7 days
   2. Last 30 days
   3. MTD
   4. QTD
   5. YTD
   6. ITD (inception to date) [default]
   2. Global data cards: w/ green or red indicators of % change since selected time period
   1. Total workflows 
   2. Total exceptions 
   3. Time saved
   4. Revenu
   5. Active Clients
   3. Tabular list of all clients with sort arrows next to each column  w/ Add Client button on far right
   1. Client name (link to client detail page)
   2. Contract start date (link to contract)
   3. Total # of workflows (link to workflows)
   4. Total # of nodes 
   5.  # of executions (link to execution log)
   6.  # of exceptions (link to exceptions log)
   7. Total revenue 
   8. Time saved
   9. Money saved
   4. Add new client
  
      1. Company name
      2. Company URL
      3. Manage departments 
      1. Add / edit / remove
      4. Users (dept heads that will need to access Nexus)
      1. Name
      2. Email
      3. Phone #
      4. Department
      5. Exceptions (alert system) for employee department
      1. Checkbox: email
      2. Checkbox: sms
      6. Billing (yes/no)
      1. Has billing access
      7. Admin (yes/no)
      1. Can manage other users in the client organization
      8. Assign SE
      1. Add existing SE User in the system
      2. Can be more than one
      2. Users: User Manager
  
         1. Add/Edit/Remove 2 kinds of users:
         1. Admin
         1. Name
         2. Email
         3. Phone 
         2. SE
         1. Name
         2. Email
         3. Phone 
         4. Hourly rate: Cost
         5. Hourly rate: billable
         6. Assigned clients 
         3. Clients:  Clients Manager
  
            1. Client Overview
            1. Top: Assigned SEs - cards w/ photo
            1. [click to change assigned SEs]
            2. Right: Table of client users
            1. Name
            2. Email
            3. Phone
            4. Billing: yes/no
            5. Admin: yes/no
            6. Notes 
            3. below: Document Links Section (collection of input fields that can be edited/saved)
            1. Survey questions
            2. Survey results
            3. Process documentation
            4. ADA Proposal
            5. Contract
            6. Factory Markdown
            7. Test plan
            4. Pipeline Progress (shows what phase client is in+ all phases in vertical timeline view with datetime stamps when completed and “Completed” buttons when not complete.  Only show one complete button since subsequent phases cannot start until the prior is complete.
            1. Discovery: Initial Survey
            2. Discovery: Process deep dive
            3. ADA Proposal Sent
            4. ADA Proposal Review done
            5. ADA Contract Sent
            6. ADA Contract Signed
            7. Credentials collected
            8. Factory build initiated
            9. Test plan generated
            10. Testing started
            11. Production deploy 
            2. Client workflows tab
  
               1. Table list of all workflows
               1. Create date/time
               2. Department
               3. Workflow name
               1. Link to reporting
               2. Link to ROI
               4. Description
               1. Link to Documentation
               5. active/inactive toggle (are you sure? popup)
               6. # of nodes 
               7. # of executions 
               1. Link to logs
               8. # of exceptions
               1. Link to logs
               9. Time saved per execution (input field)
               10. $ saved per execution (hourly rate, input field)
               4. Billing
               3. Client billing center
               1. Plan manager
               1. Add / edit subscription plan the client is on
               2. Invoice manager  (invoicing will be automated based on subscription plan)
               1. View all invoices (table, 1 row per invoice)
               1. Invoice date
               2. Terms (due by)
               3. Payment method
               1. Stripe
               2. Submit to ERP (which hooks into our internal nexus automations)
               4. Contract start date
               5. Contract end date
               6. ITD (inception to date) billed
               3. Admin only: Allow for applying credits to a client account
               5. Subscriptions: Plan Manager
  
                  1. Tabular view of all plans (editable by clicking) (Add plan button)
                  1. Name
                  2. Pricing model
                  3. Contract length
                  4. Billing cadence
                  5. Setup fee
                  6. Prepayment %
                  7. $ cap
                  8. Overage cost
                  9. # clients on plan
                  2. Add Plan form
  
                     1. Plan name (could be custom for just one client)
                     2. Pricing model
                     1. Consumption 
                     2. Description: 
                     1. Completed interview
                     2. Placed candidate
                     3. Timecard processed
                     4. Client billed
                     5. Talent paid
                     3. Credits per period
                     1. integer
                     4. Price per credit
                     1. $ amount
                     2. = Net price per period (calculated)
                     5. Product Usage API (dropdown)
                     1. AIR Direct
                     2. Nexus Base
                     3. Contract length
                     1. Month
                     2. Quarter
                     3. Year
                     4. Payment (billing) cadence (to send invoices)
                     1. Monthly
                     2. quarterly
                     5. Setup fee
                     1. $ Amount
                     6. Prepayment
                     1. % input 
                     7. Cap $ amount (for the period)
                     8. Overage cost
                     1. $ input
                     6. Messaging
                     1. V2 - ignore for now
                     7. Reporting
                     1. Redundant - ignore for now
                     8. Exceptions
  
                        1. Filters for table:
                        1. Client name
                        2. Exception type
                        3. Severity 
                        2. Exception Log: Table w/ columns: all sortable
                        1. Datetime reported
                        2. Client name
                        3. Department
                        4. Workflow name
                        5. Notifications
                        1. List of users who were be notified, when and how (email / SMS)
                        6. Exception type
                        1. Authentication
                        2. Data process
                        3. Integration
                        4. Workflow logic
                        5. Browser automation
                        7. Severity 
                        1. Critical
                        2. High
                        3. Medium
                        4. Low
                        8. Remedy (short text)
                        9. Status: (editable)
                        1. New
                        2. In Progress
                        3. Resolved
                        4. Ignored


________________


Client App PRD
                        1. Dashboard
  
                           1. Current onboarding phase (show all, far left)
                           1. Pipeline Progress (shows what phase client is in + all phases in vertical timeline view with datetime stamps when completed 
                           1. Discovery: Initial Survey
                           2. Discovery: Process deep dive
                           3. ADA Proposal Sent
                           4. ADA Proposal Review done
                           5. ADA Contract Sent
                           6. ADA Contract Signed
                           7. Credentials collected
                           8. Factory build initiated
                           9. Test plan generated
                           10. Testing started
                           11. Production deploy 
                           2. ROI summary cards (each its own card) (link to ROI section) (far right)
                           1. Time saved (last 7 days / all time)
                           2. Money saved (last 7 days / all time)
                           3. Number of workflows (link to ROI section)
                           3. Your SE card (picture + name) (far right)
                           1. Message SE
                           2. Workflow ROI
  
                              1. Table list of all workflows (all columns sortable)
                              1. Create date/time
                              2. Department
                              3. Workflow name
                              1. Link to reporting
                              2. Link to ROI
                              4. Description
                              1. Link to Documentation
                              5. active/inactive toggle (are you sure? popup)
                              6. # of nodes 
                              7. # of executions 
                              1. Link to reporting
                              8. # of exceptions
                              1. Link to exceptions
                              9. Total time saved (hours)
                              10. Total $ saved
                              3. Reporting
  
                                 1. Dropdown list of all workflows (default to first)
                                 2. List of raw logs from workflow:
                                 1. Datetime
                                 2. Workflow name
                                 3. Execution details
                                 4. Credentials
  
                                    1. List of all 3rd party services we need credentials for on the left
                                    1. Automatically derived from Nexus build plan (list of nodes)
                                    2. When a 3rd party service is selected, the appropriate fields we need entered are populated in the center
                                    1. Status (connected or not)
                                    3. Save credentials encrypted in our database  (AWS Secrets manager to be implemented later)
                                    5. Exceptions
                                    1. See admin spec - same, just for this client
                                    6. Users
                                    1. See client user manager in admin spec
                                    7. Billing  
                                       1. Subscription plan details
                                       1. Base License fee
                                       2. Consumption fees / credits
                                       1. Credits remaining
                                       3. Solutions engineering hours
                                       4. New feature build costs
                                       5. Change tiers (upgrade)
                                       1. Could just message SE to do it for them for v1
                                       2. Message Braintrust RE billing
                                       3. Usage summary - link to reporting
                                       4. Invoice center
                                       1. List of past invoices
                                       2. Current invoice
                                       3. Download PDF
                                       4. Setup payment method (stripe)
                                       5. Download contract
                                       8. Messaging
                                       1. V2 - ignore for now